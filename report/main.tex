\documentclass{article}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{listings}
\usepackage[margin=1in]{geometry}
\usepackage{xcolor}
\usepackage{gnuplot-lua-tikz}
\usepackage{subfig}
\usepackage{float}
\usepackage{siunitx}
\usepackage{todonotes}

\lstset{
	language=C,
	basicstyle=\footnotesize\ttfamily,
	commentstyle=\footnotesize\ttfamily \color{black!60},
	numbers=left,
	numberstyle=\tiny,
	stepnumber=1,
	numbersep=5pt,
	frame=lines,
	tabsize=4,
	breaklines=true,
	breakatwhitespace=true,
	showspaces=false,
	captionpos=b
}

\pagestyle{fancy}
\lhead{ECE-C353}
\chead{Final Project}
\rhead{Sean Barag}
\cfoot{\thepage\ of \pageref{LastPage}}

\newcommand{\clst}[2]{
	\begin{center}
	\parbox{.6\textwidth}{
	\lstinputlisting[firstline=#1, lastline=#2, firstnumber=#1]{../src/work_crew.c}}
	\end{center}
}

\newcommand{\hlst}[2]{
	\begin{center}
	\parbox{.6\textwidth}{
	\lstinputlisting[firstline=#1, lastline=#2, firstnumber=#1]{../src/work_crew.h}}
	\end{center}
}

\newcommand{\ttt}[1]{\texttt{#1}}

\title{ECE-C353: Systems Programming \\ Final Project}
\author{Sean Barag \\ \ttt{<sjb89@drexel.edu>}}
\date{\today}

\begin{document}
\maketitle
\section{Design}
The design for this multi-threaded recursive text search was based mostly on
provided code, but included heavy modification to prevent deadlocks.

\subsection{Header File}
All global instance, function, and type definitions were placed in the header
file~\ttt{work\_crew.h}, to improve the readability of the main source
file~\ttt{work\_crew.c}.
%
\hlst{1}{11}
%
These objects were declared globally, with the following intended meanings:
%
\begin{center}
\parbox{.85\textwidth}{
\begin{description}
	\item[NUM\_THREADS]{Maximum number of threads to possibly create.}
	\item[num\_threads]{Number of threads that have been spawned at any time.}
	\item[number\_sleeping]{Number of spawned threads that are currently sleeping.}
	\item[all\_done]{Boolean-like variable indicating if the entire origin directory has been searched.}
	\item[spawned]{Boolean-like variable indicating if other threads have been spawned yet.}
	\item[threads]{Array of type \ttt{pthread}, containing one element for each thread that is spawned.}
	\item[wake\_up]{Signal to wake threads up from sleeping.}
	\item[num\_sleeping]{Mutex protecting \ttt{number\_sleeping}.}
	\item[sleepers]{Array of mutexes protecting \ttt{number\_sleeping}.}
	\item[done]{Mutex protecting \ttt{all\_done}.}
\end{description}
}
\end{center}


\subsection{Initialization}
\subsection{Thread Creation}
\subsection{Processing}
\section{Results}
\input{img/plot/multiThreadPlot.tex}
\appendix
\section{Bash Testing Script}
%	\begin{center}
%	\parbox{.6\textwidth}{
%	\lstinputlisting{../getData.sh}}
%	\end{center}
\end{document}

